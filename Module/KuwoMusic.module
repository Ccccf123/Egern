#!name=é…·æˆ‘éŸ³ä¹
#!desc=è¿‡æ»¤é…·æˆ‘éŸ³ä¹å¹¿å‘Šï¼Œè§£é”éƒ¨åˆ†ä¼šå‘˜åŠŸèƒ½ã€‚
#!author=Yuheng0101[https://github.com/Yuheng0101], å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
#!icon=https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/KuwoMusic.png
#!openUrl=https://apps.apple.com/app/id588673713
#!tag=å»å¹¿å‘Š, è§£é”ä¼šå‘˜
#!homepage=https://github.com/sooyaaabo/Egern
#!date=2025-04-17 11:00

[Rule]
DOMAIN,g.koowo.com,REJECT
DOMAIN,rich.kuwo.cn,REJECT
# æ‹¦æˆªHTTPDNS
DOMAIN,serveraddr.service.kugou.com,REJECT
DOMAIN,twns.p2ptun.qq.com,REJECT
DOMAIN,tp2p.kg.qq.com,REJECT
IP-CIDR,81.71.61.216/32,REJECT,no-resolve
# è…¾è®¯ä¼˜é‡æ±‡ - å¹¿å‘ŠæœåŠ¡å•†
DOMAIN,ios.bugly.qq.com,REJECT
DOMAIN,sdk.e.qq.com,REJECT
DOMAIN,us.l.qq.com,REJECT
DOMAIN-SUFFIX,ugdtimg.com,REJECT
# DOMAIN, qzs.gdtimg.com, REJECT
DOMAIN-SUFFIX,gdt.qq.com,REJECT
# c2.gdt.qq.com, REJECT
DOMAIN,tmeadcomm.y.qq.com,REJECT
DOMAIN,mobilead.kuwo.cn,REJECT
DOMAIN,adstats.tencentmusic.com,REJECT
DOMAIN,adsmind.gdtimg.com,REJECT
DOMAIN,ad.tencentmusic.com,REJECT
DOMAIN,mc.tencentmusic.com,REJECT
# å¹¿å‘Šé…ç½®
URL-REGEX,"^http:\/\/rich\.kuwo\.cn\/AdService\/",REJECT-DICT
URL-REGEX,"^http:\/\/wapi\.kuwo\.cn\/openapi\/v\d\/user\/freeMode\/",REJECT-DICT
URL-REGEX,"^http:\/\/wapi\.kuwo\.cn\/openapi\/v\d\/app\/pasterAdvert\/",REJECT-DICT
URL-REGEX,"^http:\/\/wapi\.kuwo\.cn\/openapi\/v\d\/app\/startup\/config",REJECT-DICT
URL-REGEX,"^http:\/\/rich\.kuwo\.cn\/EcomResourceServer\/",REJECT-DICT
IP-CIDR,111.206.98.63/32,REJECT,no-resolve
# æœç´¢å¡«å……è¯
URL-REGEX,"^http:\/\/searchrecterm\.kuwo\.cn\/recterm\.s",REJECT-DICT
# ç²¾ç®€æˆ‘çš„é¡µé¢ä¾§è¾¹æ 
URL-REGEX,"^http:\/\/wapi\.kuwo\.cn\/openapi\/v\d\/app\/newMenuList\/menuListInfo",REJECT-DICT
# è¿·ä½ æ’­æ”¾å™¨æ¨ªå¹…
URL-REGEX,"^http:\/\/vip\d\.kuwo\.cn\/vip\/v\d\/sysinfo\?op=getRePayAndDoPayBox",REJECT-DICT
# å¬ä¹¦é¡µé¢å¹¿å‘Š
URL-REGEX,"^http:\/\/wapi\.kuwo\.cn\/openapi\/v\d\/album\/adBar\/",REJECT-DICT

[Map Local]
# é¦–é¡µ - æ¨å¹¿è¯­
^https:\/\/vip\d\.kuwo\.cn\/commercia\/vipconf\/projectPage\/getPageContent data-type=text data="{}" status-code=200
^https:\/\/tingshu\.kuwo\.cn\/v2\/api\/pay\/user\/info data-type=text data="{}" status-code=200

# æˆ‘çš„é¡µé¢æ¨ªå¹…
^https:\/\/appi\.kuwo\.cn\/kuwopay\/personal\/cells data-type=text data="{}" status-code=200

[Body Rewrite]
 http-response-jq ^http:\/\/wapi\.kuwo\.cn\/openapi\/v\d\/tingshu\/index\/radio 'walk(if type == "object" and .type == "stripAdvert" then del(.child) else . end)'

[Script]
# ä¼šå‘˜
é…·æˆ‘éŸ³ä¹ä¼šå‘˜ = type=http-response, pattern=^https?:\/\/(?:musicpay|nmobi|vip1|audiobookpay|tingshu)\.kuwo\.cn\/(?:music\.pay\?newver=\d+|mobi.s\?f=kwxs|vip\/(?:enc\/user\/vip\?op=ui&uid=|v2\/theme\?op=gd)|a\.p|v2\/api\/pay\/user\/info), script-path=https://raw.githubusercontent.com/Yuheng0101/X/main/Scripts/kuwo.js, requires-body=true, timeout=60

# ç§»é™¤å¬ä¹¦é¡µé¢å¹¿å‘Š
# ç§»é™¤å¬ä¹¦é¡µé¢å¹¿å‘Š = type=http-response, pattern=^http:\/\/wapi\.kuwo\.cn\/openapi\/v\d\/tingshu\/index\/radio, script-path=https://kelee.one/Resource/Script/Kuwo/Kuwo_remove_ads.js, requires-body=true

[MITM]
hostname = %APPEND% appi.kuwo.cn, mc.tencentmusic.com, vip*.kuwo.cn, tingshu.kuwo.cn, *.kuwo.cn
#!name=YouTube (Music)
#!desc=å»é™¤å¹¿å‘Šï¼Œä¼˜åŒ–ç•Œé¢ï¼Œæ”¯æŒå­—å¹•ç¿»è¯‘åŠŸèƒ½ï¼Œæ”¯æŒåå°æ’­æ”¾ã€‚æ”¯æŒPremiumè®¢é˜…ç”¨æˆ·ä½¿ç”¨ï¼Œä¸æ”¯æŒtvOSè®¾å¤‡ã€‚ï¼ˆè‹¥ä½¿ç”¨VirgilClyneåŒè¯­å­—å¹•ç¿»è¯‘æ’ä»¶ï¼Œåˆ™éœ€è¦ç¦ç”¨æœ¬æ’ä»¶çš„å­—å¹•ç¿»è¯‘åŠŸèƒ½ï¼Œä¸”éœ€å°†åŒè¯­å­—å¹•ç¿»è¯‘æ’ä»¶è°ƒæ•´è‡³æœ¬æ’ä»¶ä¸‹æ–¹ï¼‰
#!author=@RuCu6 @Maasea @VirgilClyne @Choler @DivineEngine @app2smile @å¯è‰ğŸ…¥
#!icon=https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/YouTube.png
#!category=å»å¹¿å‘Š, åŠŸèƒ½å¢å¼º, VirgilClyne, Maasea, Choler, DivineEngine, app2smile, å¯è‰
#!openUrl=https://apps.apple.com/app/id544007664
#!homepage=https://github.com/sooyaaabo/Egern
#!date=2024-07-16 23:00

[Rule]
AND, ((DOMAIN-SUFFIX, googlevideo.com),  (PROTOCOL, QUIC)), REJECT
AND, ((DOMAIN-SUFFIX, youtubei.googleapis.com),  (PROTOCOL, QUIC)), REJECT

[URL Rewrite]
# æ’­æ”¾é¡µå¹¿å‘Š
^https:\/\/rr[\w-]+\.googlevideo\.com\/initplayback\? - reject-dict
^https?:\/\/[\w-]+\.googlevideo\.com\/initplayback.+&oad - reject-dict
^https?:\/\/([\w-]+)\.googlevideo\.com\/initplayback(\?.*oad=.+)$ - reject-img

[Script]
# YouTubeå»å¹¿å‘Š - æ¥è‡ªMaaseaçš„ä½œå“
YouTubeè¯·æ±‚ = type=http-request, pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|get_watch|next|player|reel\/reel_watch_sequence), script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.request.preview.js, requires-body=true, binary-body-mode=true

YouTubeå“åº” = type=http-response, pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(account\/get_setting|browse|get_watch|guide|next|player|reel\/reel_watch_sequence|search), script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.response.preview.js, requires-body=true, binary-body-mode=true

[MITM]
hostname = %APPEND% www.youtube.com, m.youtube.com, tv.youtube.com, music.youtube.com, youtubei.googleapis.com, -redirector*.googlevideo.com, *.googlevideo.com, rr*.googlevideo.com
#!name=Spotify
#!desc=Spotifyè¿‡æ»¤å¹¿å‘Šï¼Œæ­Œè¯å¢å¼ºåŠåŒè¯­æ¨¡å—ï¼Œè§£é”éƒ¨åˆ†Premiumç‰¹æƒã€‚
#!author=@ddgksf2013 @VirgilClyne @å¯è‰ğŸ…¥
#!icon=https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/Spotify.png
#!category=å»å¹¿å‘Š, åŠŸèƒ½å¢å¼º, ddgksf2013, VirgilClyne, å¯è‰
#!openUrl=https://apps.apple.com/app/id324684580
#!homepage=https://github.com/sooyaaabo/Egern
#!date=2024-07-16 23:00

[Script]
# Spotifyå»å¹¿å‘Š
JSONå¤„ç† = type=http-request, pattern=^https:\/\/spclient\.wg\.spotify\.com\/(artistview\/v1\/artist|album-entity-view\/v2\/album)\/, script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-json.js, timeout=10

Protoå¤„ç† = type=http-response, pattern=^https:\/\/spclient\.wg\.spotify\.com\/(bootstrap\/v1\/bootstrap|user-customization-service\/v1\/customize)$, script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-proto.js, requires-body=true, binary-body-mode=true, timeout=10

# Spotifyæ­Œè¯å¢å¼º
è·Ÿè¸ªå“åº”Â·JSON = type=http-response, pattern=^https?:\/\/api\.spotify\.com\/v1\/tracks\?, script-path=https://raw.githubusercontent.com/DualSubs/Spotify/main/js/Spotify.response.js, requires-body=true

æ­Œè¯è¯·æ±‚Â·JSON = type=http-request, pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json, script-path=https://raw.githubusercontent.com/DualSubs/Spotify/main/js/Spotify.request.js, requires-body=true

æ­Œè¯è¯·æ±‚Â·Proto = type=http-request, pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*), script-path=https://raw.githubusercontent.com/DualSubs/Spotify/main/js/Spotify.request.js, requires-body=true, binary-body-mode=true

ç¿»è¯‘æ­Œè¯å“åº”Â·JSON = type=http-response, pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=Translate, script-path=https://raw.githubusercontent.com/DualSubs/Universal/main/js/Translate.response.js, requires-body=true

ç¿»è¯‘æ­Œè¯å“åº”Â·Proto = type=http-response, pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=Translate, script-path=https://raw.githubusercontent.com/DualSubs/Universal/main/js/Translate.response.js, requires-body=true, binary-body-mode=true

å¤–éƒ¨æ­Œè¯å“åº”Â·JSON = type=http-response, pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=External, script-path=https://raw.githubusercontent.com/DualSubs/Universal/main/js/External.Lyrics.response.js, requires-body=true

å¤–éƒ¨æ­Œè¯å“åº”Â·Proto = type=http-response, pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=External, script-path=https://raw.githubusercontent.com/DualSubs/Universal/main/js/External.Lyrics.response.js, requires-body=true, binary-body-mode=true

[MITM]
hostname = %APPEND% api.spotify.com, spclient.wg.spotify.com
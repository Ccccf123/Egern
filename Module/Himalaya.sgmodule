#!name=å–œé©¬æ‹‰é›…
#!desc=å–œé©¬æ‹‰é›…ä¼šå‘˜&å»å¹¿å‘Š
#!author=@å¯è‰ğŸ…¥ @ClydeTime
#!icon=https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/Himalaya.png
#!category=å»å¹¿å‘Š, è§£é”ä¼šå‘˜, å¯è‰, ClydeTime
#!openUrl=https://apps.apple.com/app/id876336838
#!homepage=https://github.com/sooyaaabo/Egern
#!date=2024-07-16 23:00

[Rule]
DOMAIN,gslbali.ximalaya.com,REJECT
DOMAIN,gslbtx.ximalaya.com,REJECT

[URL Rewrite]
^https?:\/\/xdcs-collector(hera)?\.ximalaya\.com\/(api|nyx)\/v1 - reject
#æ’­æ”¾é¡µLive
^https?:\/\/.*\.ximalaya\.com\/mobile-playpage\/view\/ - reject
#MyInfoçº¢ç‚¹æé†’
^https?:\/\/.*\.ximalaya\.com\/chaos-notice-web\/v1\/message\/preview\/list - reject
#å¤§çº¢åŒ…Tips
^https?:\/\/.*\.ximalaya\.com\/social-web\/bottomTabs\/dynamicEntrance\/status - reject
#å±è”½gifå¼¹çª—Ad
^https?:\/\/.*\.xmcdn\.com\/\w{8}\/\w{4}-\w{16}\/.+gif$ - reject
#å±è”½Agedè¯·æ±‚
^https?:\/\/.*\.ximalaya\.com\/(dog-portal\/checkOld|(child-mobile\/child|aged-mobile\/aged)\/mode\/query) - reject
#éƒ¨åˆ†Tabå¼¹çª—
^https?:\/\/.*\.ximalaya\.com\/discovery-feed\/isShowUserGiftPendant - reject
#å±è”½æ¶ˆæ¯çº¢ç‚¹æç¤º
^https?:\/\/.*\.ximalaya\.com\/mobile-user\/unread - reject
#å±è”½minorè¯·æ±‚
^https?:\/\/.*\.ximalaya\.com\/mobile-user\/minorProtection\/pop - reject
#å±è”½éšç§æœé›†
^https?:\/\/.*\.ximalaya\.com\/collector\/xl\/v\d - reject
#å±è”½ç‰ˆæœ¬æ›´æ–°
^https?:\/\/.*\.ximalaya\.com\/butler-portal\/versionCheck - reject
#å±è”½å¼€å±å¹¿å‘Š
^https?:\/\/(adse\.wsa|adse|adbehavior)\.ximalaya\.com\/.* - reject
#å±è”½ä½ç½®è¯·æ±‚
^https?:\/\/.*\.ximalaya\.com\/mobile\/discovery\/v\d\/location - reject
#å±è”½å®æ—¶Adè¯·æ±‚
^https?:\/\/.*\.ximalaya\.com\/api\/v\d\/adRealTime - reject
#å±è”½ting_Ad
^https?:\/\/.*\.ximalaya\.com\/ting\/(loading|feed|home)? - reject
#ä¿®å¤è½®æ’­Adå¤±æ•ˆBug
^https?:\/\/.*\.ximalaya\.com\/discovery-feed\/focus\/queryF - reject
^https?:\/\.*linkeye-cloud\/checkIP - reject
^https?:\/\/www\.taobao\.com\/help\/getip\.php - reject
^https?:\/\.*audid-api\.taobao\.com - reject
^https?:\/\/passport(ws)?\.ximalaya\.com\/user-http-app\/v1\/token\/refresh - reject

[Script]
# ä¸“è¾‘éŸ³é¢‘
ä¸“è¾‘éŸ³é¢‘@ClydeTime = type=http-response, pattern=^https?:\/\/(mobile(hera)?|m(ob)?wsa|m)\.ximalaya\.com\/mobile(-user\/v\d\/homePage|-playpage\/(track\/v\d\/baseInfo|playpage\/(tabs\/v\d|recommend(\/resource\/allocation|ContentV\d)))|\/(album\/paid\/info|playlist\/album\/new)|\/v\d\/album\/track), script-path=https://raw.githubusercontent.com/ClydeTime/Surge/main/Script/XMLY/xmly.js, requires-body=true

# ä¼šå‘˜é¡µ
ä¼šå‘˜é¡µ@ClydeTime = type=http-response, pattern=^https?:\/\/(mobile(hera)?|m(ob)?wsa|m)\.ximalaya\.com\/business-vip-(presale-mobile-web\/page|level-h5-web\/api\/(gift\/detail|profile)|welfare-mobile-web\/welfare\/module\/exclusive\/list), script-path=https://raw.githubusercontent.com/ClydeTime/Surge/main/Script/XMLY/xmly.js, requires-body=true

# å‘ç°é¡µ
å‘ç°é¡µ@ClydeTime = type=http-response, pattern=^https?:\/\/(mobile(hera)?|m(ob)?wsa|m)\.ximalaya\.com\/discovery-(category\/customCategories|feed\/v\d\/(freeListenTab\/queryCardList|mix)|ranking-web\/v\d\/ranking\/concreteRankList), script-path=https://raw.githubusercontent.com/ClydeTime/Surge/main/Script/XMLY/xmly.js, requires-body=true

# æ‚é¡¹
æ‚é¡¹@ClydeTime = type=http-response, pattern=^https?:\/\/(mobile(hera)?|m(ob)?wsa|m)\.ximalaya\.com\/(browsing-history-business\/browsing\/history\/query|focus-mobile\/focusPic\/info|nyx\/history\/query\/(detail|id\/list)|product\/detail\/v\d\/basicInfo\/dynamic|subscribe\/v\d\/subscribe\/comprehensive\/rank|vip\/(feed\/v1\/mix|v\d\/recommand)), script-path=https://raw.githubusercontent.com/ClydeTime/Surge/main/Script/XMLY/xmly.js, requires-body=true

# æœç´¢æ¨è
æœç´¢æ¨è@ClydeTime = type=http-response, pattern=^https?:\/\/search(wsa)?\.ximalaya\.com\/(hub\/)?(guideWordV\d|hotWord(V\d|Billboard\/card)), script-path=https://raw.githubusercontent.com/ClydeTime/Surge/main/Script/XMLY/xmly.js, requires-body=true

# è§£é”ä¼šå‘˜
è§£é”ä¼šå‘˜@ClydeTime = type=http-request, pattern=^https?:\/\/(mobile(hera)?|m(ob)?wsa)\.ximalaya\.com\/(mobile-playpage\/track|mobile\/quickplay), script-path=https://raw.githubusercontent.com/ClydeTime/Surge/main/Script/XMLY/xmly_ck.js, requires-body=true

# é¦–é¡µé¡¶éƒ¨å»é™¤ç›´æ’­
ç§»é™¤é¦–é¡µç›´æ’­æ¨å¹¿@å¯è‰ğŸ…¥ = type=http-response, pattern=^https?:\/\/.*\.xima.*\.com\/discovery-category\/customCategories, script-path=https://kelee.one/Resource/Script/Himalaya/Himalaya_remove_ads.js, requires-body=true

# å±è”½é¦–é¡µæ¨ªå¹…å¹¿å‘Š
ç§»é™¤é¦–é¡µæ¨ªå¹…å¹¿å‘Š@å¯è‰ğŸ…¥ = type=http-response, pattern=^https?:\/\/.*\.xima.*\.com\/focus-mobile\/focusPic, script-path=https://kelee.one/Resource/Script/Himalaya/Himalaya_remove_ads.js, requires-body=true

# å±è”½é¦–é¡µåŠ¨æ€å¹¿å‘Š
ç§»é™¤é¦–é¡µåŠ¨æ€å¹¿å‘Š@å¯è‰ğŸ…¥ = type=http-response, pattern=^https?:\/\/.*\.xima.*\.com\/discovery-feed\/v\d\/mix, script-path=https://kelee.one/Resource/Script/Himalaya/Himalaya_remove_ads.js, requires-body=true

# å±è”½æ ‡ç­¾é¡µæ»šåŠ¨å¹¿å‘Š
ç§»é™¤æ ‡ç­¾é¡µæ»šåŠ¨å¹¿å‘Š@å¯è‰ğŸ…¥ = type=http-response, pattern=^https?:\/\/.*\.xima.*\.com\/discovery-category\/v\d/category, script-path=https://kelee.one/Resource/Script/Himalaya/Himalaya_remove_ads.js, requires-body=true

# å»é™¤æˆ‘çš„é¡µé¢å¹¿å‘Šæ ‡ç­¾
ç§»é™¤æˆ‘çš„é¡µé¢å¹¿å‘Š@å¯è‰ğŸ…¥ = type=http-response, pattern=^https?:\/\/.*\.xima.*\.com\/mobile-user\/v\d\/homePage, script-path=https://kelee.one/Resource/Script/Himalaya/Himalaya_remove_ads.js, requires-body=true

[MITM]
hostname = %APPEND% *.xima*.*, *.xmcdn.*, *.ximalaya.com, 47.100.227.85, 61.164.145.12, 61.172.194.185, 61.172.194.186, 106.41.204.126, 112.80.180.72, 112.98.170.228, 112.99.146.108, 114.80.99.*, 118.25.119.177, 180.153.140.*, 180.153.250.*, 180.153.255.*